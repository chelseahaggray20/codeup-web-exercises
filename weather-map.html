<!doctype html>
<html lang="en">
<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Mapbox CSS -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />

<style>

    .main-jumbotron {
        background-image: url("https://media.giphy.com/media/KlMUO1YqJTA0o/giphy.gif");

        background-size: cover;
        background-position: center;
        text-align: center;
        height: 30vh;

    }


    .weatherCards{
        background-color: lightgray;
        border: 1px solid gray;
        text-align: center;
    }

    body {
        background-color: #00aba9;
        margin-top: 20px;
    }


    #header {
        font-weight: bold;
        text-align: center;
    }

    #header-2 {
        font-weight: bold;
        text-align: start;
    }

    #map{
        display: flex;
        justify-content: center;
        height: 400px;
        width: 800px;
    }
    #forecast-header {
        font-weight: bold;
        text-align: center;
    }






</style>

    <!-- ************************************************ Weather cards start ************************************************ -->

<body>

<div class="main-jumbotron">
    <h1 id = "header">Weather Application</h1>
    <hr>
    <p id="forecast-header">3-DAY FORECAST</p>
</div>


<h3 id="header-2">San Antonio</h3>

<div class="container">
    <div class="row">
        <div class="col-xs-12 col-md-4 mb-1">
            <div class="Today-weather weatherCards" id="current_weather">
            </div>
        </div>
        <div class="col-xs-12 col-md-4 mb-1">
            <div class="Tomorrow-weather weatherCards" id="tomorrow_weather">
            </div>
        </div>
        <div class="col-xs-12 col-md-4 mb-1">
            <div class="Next-weather weatherCards" id="day_after">
            </div>
        </div>
    </div>
</div>

<!--<form>-->
<!--    Latitude:<br>-->

<!--    <input type="text" name="latitude" placeholder="Enter Latitude Here" id="lat"><br>-->
<!--    Longitude:<br>-->

<!--    <input type="text" name="longitude" placeholder="Enter Longitude Here" id="long"><br>-->

<!--    <input type="submit" value="Submit" id="go-getter">-->
<!--</form>-->


<div id = 'map'></div>



<script src="JS/keys.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<!--<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>-->

<!-- Mapbox JS -->
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>
<script src="JS/keys.js"></script>
<script src="JS/mapbox-geocoder-utils.js"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>-->
<!--<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>-->


<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script>

    var weatherType = {
            "clear-day": "img/clear-day.png",
            "clear-night": "img/clear-night.png",
            "rain": "img/rain.png",
            "snow": "img/snow.png",
            "sleet": "img/sleet.png",
            "wind": "img/windy.png",
            "fog": "img/fog.png",
            "cloudy": "img/cloudy.png",
            "partly-cloudy-day": "img/partly-cloudy.png",
            "partly-cloudy-night": "img/partly-cloudy-night.png",

        };

"use strict";

    $(document).ready(function() {
        getWeather(29.7604, -95.3698);

        function getWeather(latitude, longitude) {
            var weather = $.ajax("https://cors-anywhere.herokuapp.com/https://api.darksky.net/forecast/" + darkSkyKey + "/" + latitude + ',' + longitude);
            weather.done(function (weather) {
                // console.log(weather);
                for (var i = 0; i <= 2; i++) {

                }


                $('.Today-weather').empty().append(
                    '<div>' +
                    '<h5>' + "Current Weather " + '</h5>' +
                    '<img src="' + weatherType[weather.daily.data[0].icon] + '" class="mt-2" style="width: 30%">' +
                    '<p>' + weather.currently.temperature + '° F' + '</p>' +
                    '<p>' + "The Sky is " + weather.currently.summary + '</p>' +
                    '<p>' + "Humidity: " + weather.currently.humidity + "%" + '</p>' +
                    '<p>' + "Wind: " + weather.currently.windSpeed + " MPH" + '</p>' +
                    '<p>' + "Pressure: " + weather.currently.pressure + '</p>' +
                    '</div>');

                $('.Tomorrow-weather').empty().append(
                    '<div>' +
                    '<h5>' + "Tomorrow " + '</h5>' +
                    '<img src="' + weatherType[weather.daily.data[1].icon] + '" class="mt-2" style="width: 30%">' +
                    '<p>' + weather.daily.data[1].temperatureHigh + '° F' + ' / ' + weather.daily.data[1].temperatureLow + '</p>' +
                    '<p>' + "The Sky is " + weather.daily.data[1].summary + '</p>' +
                    '<p>' + "Humidity: " + weather.daily.data[1].humidity + "%" + '</p>' +
                    '<p>' + "Wind: " + weather.daily.data[1].windSpeed + " MPH" + '</p>' +
                    '<p>' + "Pressure: " + weather.daily.data[1].pressure + '</p>' +
                    '</div>');

                $('.Next-weather').empty().append(
                    '<div>' +
                    '<h5>' + "Next Day" + '</h5>' +
                    '<img src="' + weatherType[weather.daily.data[2].icon] + '" class="mt-2" style="width: 30%">' +
                    '<p>' + weather.daily.data[2].temperatureHigh + '° F' + ' / ' + weather.daily.data[2].temperatureLow + '</p>' +
                    '<p>' + "The Sky is " + weather.daily.data[2].summary + '</p>' +
                    '<p>' + "Humidity: " + weather.daily.data[2].humidity + "%" + '</p>' +
                    '<p>' + "Wind: " + weather.daily.data[2].windSpeed + " MPH" + '</p>' +
                    '<p>' + "Pressure: " + weather.daily.data[2].pressure + '</p>' +
                    '</div>');





        mapboxgl.accessToken = mapboxToken;
        var map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v9',
            zoom: 10,
            center: [-98.4916, 29.4252]
        });

        // $('#go-getter').click(function(e) {
        //     e.preventDefault();
        //     var longitude = long.value;
        //     var latitude = lat.value;



            reverseGeocode({lng: longitude, lat: latitude}, mapboxToken).then(function (result) {
                geocode(result, mapboxToken).then(function (result2) {
                    map.setCenter(result2);
                    map.setZoom(15);
                    var marker = new mapboxgl.Marker()
                        .setLngLat(result2)
                        .addTo(map);

                });

            })

            });
            getWeather(lat.value, long.value);
        }
    })

    //FOR DRAGGABLE MARKER

    // var coordinates = document.getElementById('coordinates');
    // var map = new mapboxgl.Map({
    //     container: 'map',
    //     style: 'mapbox://styles/mapbox/streets-v11',
    //     center: [0, 0],
    //     zoom: 2
    // });
    //
    // var marker = new mapboxgl.Marker({
    //     draggable: true
    // })
    //     .setLngLat([0, 0])
    //     .addTo(map);
    //
    // function onDragEnd() {
    //     var lngLat = marker.getLngLat();
    //     coordinates.style.display = 'block';
    //     coordinates.innerHTML =
    //         'Longitude: ' + lngLat.lng + '<br />Latitude: ' + lngLat.lat;
    // }
    //
    // marker.on('dragend', onDragEnd);

</script>



</body>
</html>